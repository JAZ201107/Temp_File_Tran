{% extends 'layouts/base_user.html' %}

{% block title %} Dashboard {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}


{% block content %}
    <div id="app">

                <el-button type="button" id="start" @click="get_video" type="primary">Start</el-button>
                <br>
                <br>
                <img id="video_streaming" width="500px" height="500px" alt="stream" v-bind:src="img_url"/>



    </div>
{% endblock content %}

<!-- Specific JS goes HERE -->
{% block javascripts %}

    <script src="/static/assets/js/plugins/chartjs.min.js"></script>
    <script src="/static/assets/js/plugins/Chart.extension.js"></script>
    <script src="/static/assets/js/vue.js"></script>
    <script src="/static/assets/js/axios.min.js"></script>
    <script src="/static/assets/element-ui/lib/index.js"></script>

    <link rel="stylesheet" href="/static/assets/plugins/element-ui/index.css"/>
    <link rel="stylesheet" href="/static/assets/styles/common.css"/>
    <link rel="stylesheet" href="/static/assets/styles/icon/iconfont.css"/>

    <script>
        new Vue({
            el: "#app",
            data() {
                return {
                    button: {
                        text: "Start"
                    },
                    img_url: "http://3.1.129.125:8000/user/webcam_default"
                }
            },
            mounted: function () {
            },
            methods: {
                get_video() {
                    var b = document.getElementById("start")
                    if (b.innerHTML == "Start") {
                        this.img_url = "http://3.1.129.125:8000/user/webcam_capture"
                        b.innerHTML = "Stop"
                    } else {
                        b.innerHTML = "Start"
                        this.img_url = "http://3.1.129.125:8000/user/webcam_default"
                    }
                }
            }
        })
    </script>


{% endblock javascripts %}
